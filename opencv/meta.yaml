package:
    name: opencv
    version: 3.1.0

source:
    fn: opencv-3.1.0.tar.gz
    url: https://github.com/Itseez/opencv/archive/3.1.0.tar.gz
    sha256: f00b3c4f42acda07d89031a2ebb5ebe390764a133502c03a511f67b78bbd4fbf
    patches:
      # C++11 workaround for older Windows compilers
      - video_io_cpp11.patch    [win and py<35]
      # PThreads not provided on OS X?  Ensure that it is disabled, and use TBB instead.
      - no-pthreads.patch       [osx]
      # OpenCV's cmake messes up Conda's link embedding fixer
      - no-rpath.patch
      # squelch a data initialization error that should be a warning
      # http://stackoverflow.com/questions/32931856/cv2-3-0-0-cv2-flannbasedmatcher-flann-knnmatch-is-throwing-cv2-error
      - kill_null_error.patch
      # patches for opencv-contrib not compiling in Windows
      #    applied in bld.bat
      # - windows_compiler.patch

requirements:
    build:
        - cmake
        - numpy  x.x
        - jpeg   [unix]
        - zlib   [unix]
        - libpng [unix]
        - ffmpeg [unix]
        - python
        - curl   [win and py<30]
        - libtiff [unix]
        - tbb     [unix]
        - hdf5
    run:
        - python
        - numpy  x.x
        - ffmpeg [unix]
        - jpeg   [unix]
        - zlib   [unix]
        - libpng [unix]
        - libtiff [unix]
        - tbb     [unix]
        - hdf5
test:
    imports:
      - cv2

about:
    home: http://opencv.org/
    license: BSD
